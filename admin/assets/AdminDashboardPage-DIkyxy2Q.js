import{r as a,u as b,j as e,L as x}from"./index-DazYKB6b.js";import{A as f,f as N,a as m}from"./AdminLayout-4xEFVA7O.js";import{f as w,a as k,b as y,c as L}from"./api-Cg0uqViC.js";function S(){const[i,h]=a.useState(null),[d,u]=a.useState([]),[o,j]=a.useState([]),[v,c]=a.useState(!0),p=b();a.useEffect(()=>{g()},[]);const g=async()=>{c(!0);const s=localStorage.getItem("admin_token");if(!s){p("/login");return}try{const[t,l,n]=await Promise.all([w(s),k(s,"pending"),y(s,{sort:"newest",page:1})]);h(t),u(l.items.slice(0,5).map(L)),j(n.slice(0,5))}catch(t){console.error("Failed to load dashboard:",t)}finally{c(!1)}},r=({label:s,value:t,color:l,icon:n})=>e.jsx("div",{className:"bg-[#1e1e26] p-6 rounded-xl border border-white/5",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-zinc-400 text-sm",children:s}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${l}`,children:t})]}),e.jsx("div",{className:"p-3 bg-white/5 rounded-lg text-zinc-400",children:n})]})});return e.jsx(f,{title:"CRM Overview",children:v?e.jsxs("div",{className:"animate-pulse space-y-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 h-32 bg-[#1e1e26] rounded-xl"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 h-64 bg-[#1e1e26] rounded-xl"})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(r,{label:"Pesanan Pending",value:i?.pending_orders||0,color:"text-slate-300",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx(r,{label:"Ticket Terbuka",value:i?.open_tickets||0,color:"text-red-400",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),e.jsx(r,{label:"Customer Baru (7 Hari)",value:i?.new_customers_7d||0,color:"text-slate-300",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),e.jsx(r,{label:"Perlu Follow-up",value:i?.follow_up_needed||0,color:"text-slate-300",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-[#1e1e26] rounded-xl border border-white/5 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-white/5 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-white",children:"Pesanan Pending Terbaru"}),e.jsx(x,{to:"/orders",className:"text-sm text-slate-300 hover:text-slate-200",children:"Lihat Semua"})]}),e.jsx("div",{className:"divide-y divide-white/5",children:d.length>0?d.map(s=>e.jsxs("div",{className:"p-4 hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-white font-medium",children:s.productTitle}),e.jsx("span",{className:"text-slate-300 text-sm font-bold",children:N(s.productPrice)})]}),e.jsxs("div",{className:"flex justify-between text-xs text-zinc-500",children:[e.jsx("span",{children:s.customerName}),e.jsx("span",{children:m(s.createdAt)})]})]},s.id)):e.jsx("div",{className:"p-8 text-center text-zinc-500",children:"Tidak ada pesanan pending."})})]}),e.jsxs("div",{className:"bg-[#1e1e26] rounded-xl border border-white/5 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-white/5 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-white",children:"Customer Terbaru"}),e.jsx(x,{to:"/customers",className:"text-sm text-slate-300 hover:text-slate-200",children:"Lihat Semua"})]}),e.jsx("div",{className:"divide-y divide-white/5",children:o.length>0?o.map(s=>e.jsxs("div",{className:"p-4 hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-white font-medium",children:s.full_name||s.email}),e.jsxs("span",{className:"text-zinc-400 text-xs bg-white/10 px-2 py-0.5 rounded",children:[s.total_orders," Pesanan"]})]}),e.jsxs("div",{className:"text-xs text-zinc-500",children:[s.email," â€¢ Bergabung ",m(s.last_activity||"")]})]},s.id)):e.jsx("div",{className:"p-8 text-center text-zinc-500",children:"Belum ada customer baru."})})]})]})]})})}export{S as AdminDashboardPage};
