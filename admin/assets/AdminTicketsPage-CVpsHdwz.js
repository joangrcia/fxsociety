import{r as a,u,j as e}from"./index-Dya0Yoma.js";import{A as p,a as h}from"./AdminLayout-B_zPqndL.js";import{d as g,A as j}from"./api-BmpbTcpP.js";function N(){const[r,l]=a.useState([]),[o,i]=a.useState(!0),[n,d]=a.useState("all"),c=u();a.useEffect(()=>{m()},[n]);const m=async()=>{i(!0);const s=localStorage.getItem("admin_token");if(s)try{const t=await g(s,n);l(t.items)}catch(t){console.error("Failed to load tickets:",t),t instanceof j&&t.status===401&&(localStorage.removeItem("admin_token"),c("/login"))}finally{i(!1)}},x=e.jsxs("select",{value:n,onChange:s=>d(s.target.value),className:"bg-[#1e1e26] text-zinc-300 text-sm rounded-lg border border-white/10 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[e.jsx("option",{value:"all",children:"Semua Status"}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"answered",children:"Answered"}),e.jsx("option",{value:"closed",children:"Closed"})]});return e.jsx(p,{title:"Inbox Ticket",actions:x,children:o?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((s,t)=>e.jsx("div",{className:"bg-[#1e1e26] rounded-2xl p-5 animate-pulse h-24"},t))}):r.length>0?e.jsx("div",{className:"space-y-4",children:r.map(s=>e.jsx("div",{className:"bg-[#1e1e26] p-5 rounded-xl border border-white/5",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium",children:s.title}),e.jsx("p",{className:"text-zinc-400 text-sm mt-1",children:s.message}),e.jsxs("p",{className:"text-zinc-600 text-xs mt-3",children:["ID: ",s.id," • User ID: ",s.user_id," • ",h(s.created_at)]})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded capitalize ${s.status==="open"?"bg-emerald-500/10 text-emerald-400":s.status==="closed"?"bg-zinc-500/10 text-zinc-400":"bg-blue-500/10 text-blue-400"}`,children:s.status})]})},s.id))}):e.jsx("div",{className:"text-center py-16 bg-[#1e1e26] rounded-2xl border border-white/5",children:e.jsx("p",{className:"text-zinc-400",children:"Tidak ada tiket."})})})}export{N as AdminTicketsPage};
