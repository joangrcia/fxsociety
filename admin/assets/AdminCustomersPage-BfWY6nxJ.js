import{r as a,u as p,j as e,L as f}from"./index-DazYKB6b.js";import{A as j,f as N,a as y}from"./AdminLayout-4xEFVA7O.js";import{b as g,A as v}from"./api-Cg0uqViC.js";function A(){const[i,l]=a.useState([]),[c,n]=a.useState(!0),[r,o]=a.useState(""),[d,m]=a.useState(""),x=p();a.useEffect(()=>{const t=setTimeout(()=>m(r),500);return()=>clearTimeout(t)},[r]),a.useEffect(()=>{h()},[d]);const h=async()=>{n(!0);const t=localStorage.getItem("admin_token");if(t)try{const s=await g(t,{search:d});l(s)}catch(s){console.error("Failed to load customers:",s),s instanceof v&&s.status===401&&(localStorage.removeItem("admin_token"),x("/login"))}finally{n(!1)}},u=e.jsx("input",{type:"text",placeholder:"Cari customer...",value:r,onChange:t=>o(t.target.value),className:"bg-[#1e1e26] text-zinc-300 text-sm rounded-lg border border-white/10 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500 w-64"});return e.jsx(j,{title:"Customers",actions:u,children:c?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((t,s)=>e.jsx("div",{className:"bg-[#1e1e26] rounded-xl p-4 animate-pulse h-16"},s))}):i.length>0?e.jsx("div",{className:"bg-[#1e1e26] rounded-xl border border-white/5 overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-white/5 text-zinc-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 font-medium",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Total Order"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Total Spend"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Last Activity"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:i.map(t=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:t.full_name||"No Name"}),e.jsx("div",{className:"text-zinc-500",children:t.email}),e.jsx("div",{className:"flex gap-1 mt-1",children:t.tags.map(s=>e.jsx("span",{className:"text-[10px] bg-emerald-500/10 text-emerald-400 px-1.5 rounded",children:s},s))})]})}),e.jsx("td",{className:"px-6 py-4 text-zinc-300",children:t.total_orders}),e.jsx("td",{className:"px-6 py-4 text-emerald-400 font-medium",children:N(t.total_spend)}),e.jsx("td",{className:"px-6 py-4 text-zinc-500",children:t.last_activity?y(t.last_activity):"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(f,{to:`/customers/${t.id}`,className:"text-emerald-400 hover:text-emerald-300 font-medium",children:"View Profile"})})]},t.id))})]})}):e.jsx("div",{className:"text-center py-16 bg-[#1e1e26] rounded-2xl border border-white/5",children:e.jsx("p",{className:"text-zinc-400",children:"Tidak ada customer ditemukan."})})})}export{A as AdminCustomersPage};
