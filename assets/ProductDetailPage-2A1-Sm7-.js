import{r,j as e,B as p,L as f,e as W,b as A,c as T,g as E,h as B,a as O,i as F}from"./index-BqLjboeP.js";import{B as g}from"./Badge-DFohYmgh.js";import{f as h,g as M,a as I,b as _}from"./orders-C0ZHXr8-.js";function K({product:a,onSubmit:d,isLoading:l=!1,user:c}){const[i,x]=r.useState({customerName:"",customerEmail:"",customerWhatsapp:"",notes:""});r.useEffect(()=>{c&&x(n=>({...n,customerName:c.full_name||"",customerEmail:c.email||""}))},[c]);const u=n=>{n.preventDefault(),d(i)},t=(n,o)=>{x(j=>({...j,[n]:o}))};return e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#14141a] rounded-xl p-4 border border-white/5",children:[e.jsx("p",{className:"text-sm text-zinc-500 mb-1",children:"Produk yang dipesan"}),e.jsx("p",{className:"text-white font-medium",children:a.title}),e.jsx("p",{className:"text-emerald-400 font-bold mt-1",children:h(a.price)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"customerName",className:"block text-sm font-medium text-zinc-300 mb-2",children:["Nama Lengkap ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{id:"customerName",type:"text",value:i.customerName,onChange:n=>t("customerName",n.target.value),placeholder:"Masukkan nama lengkap",required:!0,className:"w-full bg-[#14141a] text-white rounded-lg border border-white/10 px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent placeholder:text-zinc-600 transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"customerEmail",className:"block text-sm font-medium text-zinc-300 mb-2",children:["Email ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{id:"customerEmail",type:"email",value:i.customerEmail,onChange:n=>t("customerEmail",n.target.value),placeholder:"nama@email.com",required:!0,className:"w-full bg-[#14141a] text-white rounded-lg border border-white/10 px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent placeholder:text-zinc-600 transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"customerWhatsapp",className:"block text-sm font-medium text-zinc-300 mb-2",children:["Nomor WhatsApp ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{id:"customerWhatsapp",type:"tel",value:i.customerWhatsapp,onChange:n=>t("customerWhatsapp",n.target.value),placeholder:"08123456789",required:!0,className:"w-full bg-[#14141a] text-white rounded-lg border border-white/10 px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent placeholder:text-zinc-600 transition-all"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Kami akan menghubungi Anda via WhatsApp untuk konfirmasi"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"notes",className:"block text-sm font-medium text-zinc-300 mb-2",children:["Catatan ",e.jsx("span",{className:"text-zinc-500",children:"(opsional)"})]}),e.jsx("textarea",{id:"notes",value:i.notes,onChange:n=>t("notes",n.target.value),placeholder:"Tambahkan catatan jika diperlukan...",rows:3,className:"w-full bg-[#14141a] text-white rounded-lg border border-white/10 px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent placeholder:text-zinc-600 transition-all resize-none"})]})]}),e.jsx(p,{type:"submit",className:"w-full",size:"lg",isLoading:l,children:"Buat Pesanan"}),e.jsx("p",{className:"text-xs text-zinc-500 text-center",children:"Dengan membuat pesanan, Anda menyetujui bahwa trading mengandung risiko dan tidak ada jaminan profit dari produk kami."})]})}function q({order:a}){const l=`https://wa.me/6281234567890?text=${encodeURIComponent(`Halo, saya ingin konfirmasi pembayaran untuk pesanan:

Order ID: ${a.id}
Produk: ${a.productTitle}
Total: ${h(a.productPrice)}
Nama: ${a.customerName}

Mohon konfirmasi pesanan saya. Terima kasih!`)}`;return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-slate-400/20 flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-10 h-10 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:"Pesanan Berhasil Dibuat!"}),e.jsx("p",{className:"text-zinc-400 mb-8",children:"Silakan lakukan pembayaran dan konfirmasi via WhatsApp."}),e.jsx("div",{className:"bg-[#14141a] rounded-2xl p-6 border border-white/5 text-left mb-8",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-zinc-500 text-sm",children:"Order ID"}),e.jsx("span",{className:"text-white font-mono font-medium",children:a.id})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-zinc-500 text-sm",children:"Status"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${I(a.status)}`,children:M(a.status)})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-zinc-500 text-sm",children:"Produk"}),e.jsx("span",{className:"text-white text-right",children:a.productTitle})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-white/5",children:[e.jsx("span",{className:"text-zinc-300 font-medium",children:"Total"}),e.jsx("span",{className:"text-slate-300 text-xl font-bold",children:h(a.productPrice)})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-zinc-500 text-sm",children:"Tanggal"}),e.jsx("span",{className:"text-zinc-400 text-sm",children:_(a.createdAt)})]})]})}),e.jsxs("div",{className:"bg-[#1e1e26] rounded-2xl p-6 border border-white/5 text-left mb-8",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Instruksi Pembayaran"}),e.jsxs("ol",{className:"space-y-3 text-sm text-zinc-400",children:[e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-slate-400/20 text-slate-300 flex items-center justify-center shrink-0 text-xs font-medium",children:"1"}),e.jsxs("span",{children:["Transfer ke rekening BCA ",e.jsx("strong",{className:"text-white",children:"1234567890"})," a.n. ",e.jsx("strong",{className:"text-white",children:"FXSociety"})]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-slate-400/20 text-slate-300 flex items-center justify-center shrink-0 text-xs font-medium",children:"2"}),e.jsxs("span",{children:["Transfer sesuai total: ",e.jsx("strong",{className:"text-slate-300",children:h(a.productPrice)})]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-slate-400/20 text-slate-300 flex items-center justify-center shrink-0 text-xs font-medium",children:"3"}),e.jsx("span",{children:"Kirim bukti transfer via WhatsApp untuk konfirmasi"})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-slate-400/20 text-slate-300 flex items-center justify-center shrink-0 text-xs font-medium",children:"4"}),e.jsx("span",{children:"Produk akan dikirim setelah pembayaran dikonfirmasi (maks. 1x24 jam)"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 w-full px-6 py-4 bg-emerald-600 text-white font-medium rounded-lg hover:bg-emerald-500 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Hubungi WhatsApp untuk Konfirmasi"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{to:"/orders",className:"flex-1",children:e.jsx(p,{variant:"secondary",className:"w-full",children:"Lihat Pesanan Saya"})}),e.jsx(f,{to:"/shop",className:"flex-1",children:e.jsx(p,{variant:"ghost",className:"w-full",children:"Kembali ke Toko"})})]})]})]})}function R(){const{id:a}=W(),d=A(),l=T(),[c,i]=r.useState("detail"),[x,u]=r.useState("loading"),[t,n]=r.useState(null),[o,j]=r.useState(null),[v,b]=r.useState(null),[w,N]=r.useState(!1),[k,y]=r.useState(null),[z,S]=r.useState(null);r.useEffect(()=>{const s=localStorage.getItem("auth_token");s&&E(s).then(S).catch(()=>{})},[]),r.useEffect(()=>{const s=localStorage.getItem("auth_token");l.state?.openOrder===!0&&s&&(i("order"),d(l.pathname+l.search,{replace:!0,state:null}))},[l.pathname,l.search,l.state,d]),r.useEffect(()=>{a&&(u("loading"),b(null),B(a).then(s=>{j(s),n(O(s)),u("success")}).catch(s=>{console.error("Failed to fetch product:",s),b(s.message||"Gagal memuat produk"),u("error")}))},[a]);const P=()=>{if(!localStorage.getItem("auth_token")){d("/login",{state:{from:l.pathname+l.search,openOrder:!0}});return}i("order")},L=async s=>{if(o){N(!0);try{const m=await F({product_id:o.id,name:s.customerName,email:s.customerEmail,whatsapp:s.customerWhatsapp,notes:s.notes}),C={id:m.order_code,productId:o.id.toString(),productTitle:o.title,productPrice:o.price_idr,customerName:s.customerName,customerEmail:s.customerEmail,customerWhatsapp:s.customerWhatsapp,notes:s.notes,status:m.status,createdAt:m.created_at};y(C),i("success")}catch(m){console.error("Failed to create order:",m),alert("Gagal membuat pesanan. Silakan coba lagi.")}finally{N(!1)}}};return x==="loading"?e.jsx("main",{className:"pt-24 pb-16 px-4",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 w-20 bg-zinc-800 rounded mb-8"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12",children:[e.jsx("div",{className:"aspect-square rounded-2xl bg-zinc-800"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-10 w-3/4 bg-zinc-800 rounded"}),e.jsx("div",{className:"h-4 w-full bg-zinc-800 rounded"}),e.jsx("div",{className:"h-4 w-2/3 bg-zinc-800 rounded"}),e.jsx("div",{className:"h-12 w-40 bg-zinc-800 rounded mt-8"})]})]})]})})}):x==="error"||!t?e.jsx("main",{className:"pt-24 pb-16 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Produk Tidak Ditemukan"}),e.jsx("p",{className:"text-zinc-400 mb-8",children:v||"Produk yang Anda cari tidak tersedia atau sudah dihapus."}),e.jsx(p,{href:"/shop",children:"Kembali ke Toko"})]})}):c==="success"&&k?e.jsx("main",{className:"pt-24 pb-16 px-4",children:e.jsx("div",{className:"max-w-xl mx-auto",children:e.jsx(q,{order:k})})}):c==="order"?e.jsx("main",{className:"pt-24 pb-16 px-4",children:e.jsxs("div",{className:"max-w-xl mx-auto",children:[e.jsxs("button",{onClick:()=>i("detail"),className:"inline-flex items-center gap-2 text-zinc-400 hover:text-white mb-8 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Kembali ke Detail Produk"]}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:"Form Pemesanan"}),e.jsx("p",{className:"text-zinc-400 mb-8",children:"Isi data Anda untuk memesan produk ini."}),e.jsx("div",{className:"bg-[#1e1e26] rounded-2xl p-6 md:p-8 border border-white/5",children:e.jsx(K,{product:t,onSubmit:L,isLoading:w,user:z})})]})}):e.jsx("main",{className:"pt-24 pb-16 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("nav",{className:"mb-8",children:e.jsxs("ol",{className:"flex items-center gap-2 text-sm",children:[e.jsx("li",{children:e.jsx(f,{to:"/shop",className:"text-zinc-500 hover:text-white transition-colors",children:"Toko"})}),e.jsx("li",{className:"text-zinc-600",children:"/"}),e.jsx("li",{className:"text-zinc-300",children:t.title})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square rounded-2xl overflow-hidden bg-[#14141a] border border-white/5",children:e.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[e.jsx(g,{variant:"category",category:t.category}),t.badge&&e.jsx(g,{variant:"status",status:t.badge}),t.isSoldOut&&e.jsx(g,{variant:"status",status:"soldout"})]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-white mb-4",children:t.title}),e.jsx("p",{className:"text-zinc-400 leading-relaxed mb-6",children:t.descriptionFull||t.description}),e.jsx("div",{className:"mb-8",children:e.jsx("span",{className:"text-3xl md:text-4xl font-bold text-emerald-400",children:h(t.price)})}),e.jsxs("div",{className:"bg-[#14141a] rounded-xl p-5 border border-white/5 mb-8",children:[e.jsx("h3",{className:"text-white font-semibold mb-3",children:"Termasuk:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-zinc-400",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Akses seumur hidup (lifetime)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Update gratis untuk versi selanjutnya"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Panduan instalasi & penggunaan"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Support via WhatsApp"]})]})]}),t.isSoldOut?e.jsx("div",{className:"bg-zinc-800/50 rounded-xl p-4 text-center",children:e.jsx("p",{className:"text-zinc-400",children:"Produk ini sedang tidak tersedia"})}):e.jsxs("div",{className:"space-y-3",children:[e.jsx(p,{size:"lg",className:"w-full",onClick:P,children:"Pesan Sekarang"}),e.jsx("p",{className:"text-xs text-zinc-500 text-center",children:"Pembayaran manual via transfer bank. Konfirmasi via WhatsApp."})]})]})]}),e.jsx("div",{className:"mt-12 p-4 bg-slate-400/10 border border-slate-400/20 rounded-xl",children:e.jsxs("p",{className:"text-sm text-slate-100/80",children:[e.jsx("strong",{children:"Disclaimer:"})," Trading mengandung risiko tinggi. Tidak ada jaminan profit dari penggunaan produk ini. Pastikan Anda memahami risiko sebelum membeli."]})})]})})}export{R as ProductDetailPage};
